<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Astro Jumpers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --background-dark: #0c0a1a; --primary-purple: #6c25be; --primary-pink: #da4ea2; }
        body { background-color: var(--background-dark); color: #ffffff; font-family: 'Space Grotesk', sans-serif; touch-action: manipulation; }
        .text-glow { text-shadow: 0 0 8px #ff00ff, 0 0 20px var(--primary-purple); }
        .btn { font-family: 'Press Start 2P', cursive; background: linear-gradient(45deg, var(--primary-pink), var(--primary-purple)); border: none; padding: 1rem 2rem; border-radius: 8px; font-size: 1.2rem; color: white; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.2); text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(218, 78, 162, 0.5); }
        .btn:disabled { background: #4b5563; cursor: not-allowed; transform: translateY(0); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        #gameCanvas { background: var(--background-dark); background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px), radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px), radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px), radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px); background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px; background-position: 0 0, 40px 60px, 130px 270px, 70px 100px; animation: stars 60s linear infinite; cursor: pointer; display: block; transition: background-color 3s ease-in-out; width: 100%; height: 100%; }
        @keyframes stars { from { background-position: 0 0, 40px 60px, 130px 270px, 70px 100px; } to { background-position: 0 1000px, 40px 1060px, 130px 1270px, 70px 1100px; } }
        .hud { position: absolute; left: 50%; transform: translateX(-50%); text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff; font-family: 'Press Start 2P', cursive; }
        .modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(12, 10, 26, 0.8); border: 2px solid var(--primary-purple); border-radius: 16px; padding: 1.5rem; text-align: center; box-shadow: 0 0 30px var(--primary-purple); backdrop-filter: blur(5px); width: 90%; max-width: 500px; font-family: 'Press Start 2P', cursive;}
        .leaderboard-entry { display: flex; justify-content: space-between; padding: 0.5rem 1rem; border-radius: 8px; font-family: 'Space Grotesk', sans-serif; font-weight: 700; transition: background-color 0.2s ease-in-out; }
        .leaderboard-entry:nth-child(odd) { background-color: rgba(255,255,255,0.05); }
        .leaderboard-entry.rank-1 { background: linear-gradient(90deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.2)); border: 1px solid rgba(255, 215, 0, 0.3); }
        .name-input { background-color: rgba(255,255,255,0.1); border: 1px solid var(--primary-purple); border-radius: 8px; padding: 0.5rem 1rem; color: white; text-align: center; font-family: 'Press Start 2P', cursive; }
        .character-option.selected { border-color: #a855f7; box-shadow: 0 0 15px #a855f7; }
        .animated-gradient { background: linear-gradient(300deg, var(--background-dark), #2a1a3c, var(--background-dark)); background-size: 200% 200%; animation: gradient-animation 15s ease infinite; }
        @keyframes gradient-animation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        #nav-menu { transition: max-height 0.3s ease-out; }
        .live-dot { width: 12px; height: 12px; min-width: 12px; background-color: #ef4444; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); } 100% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
        .star-rating { color: #f59e0b; text-shadow: 0px 0px 2px black, 0px 0px 4px black; }
        .section-title-container { border-bottom: 2px solid; border-image: linear-gradient(to right, transparent, var(--primary-purple), transparent) 1; padding-bottom: 0.5rem; }
    </style>
</head>
<body class="animated-gradient">

    <header class="bg-black/30 backdrop-blur-lg sticky top-0 z-40 border-b border-purple-800/50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a href="index.html">
                        <img src="https://i.imgur.com/aeDmJZR.png" alt="Astro Jumpers Logo" class="h-10">
                    </a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#game-section-container" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Game</a>
                        <a href="#leaderboard-container" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Leaderboard</a>
                        <a href="news-page.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">News</a>
                        <a href="reviews-page.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Reviews</a>
                        <a href="#" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium opacity-50 cursor-not-allowed">Merch (Soon)</a>
                    </div>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button id="hamburger-button" type="button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </nav>
        <div class="md:hidden max-h-0 overflow-hidden" id="nav-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#game-section-container" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Game</a>
                <a href="#leaderboard-container" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Leaderboard</a>
                <a href="news-page.html" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">News</a>
                <a href="reviews-page.html" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Reviews</a>
                <a href="#" class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium opacity-50 cursor-not-allowed">Merch (Soon)</a>
            </div>
        </div>
    </header>

    <main id="main-content" class="max-w-7xl mx-auto p-4 space-y-12 md:space-y-16">
        <section id="game-section-container" class="w-full pt-8 md:pt-12">
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-6xl font-bold text-glow" style="font-family: 'Press Start 2P', cursive;">PLAY THE VIRAL GAME</h1>
                <p class="mt-4 text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">The internet is hooked, but can you survive? Jump your way to the top of the LIVE global leaderboard and prove you're the best jumper in the galaxy!</p>
            </div>
             <div id="game-wrapper" class="w-full h-[60vh] md:h-[70vh] max-h-[800px] rounded-2xl overflow-hidden border-2 border-purple-800/50 relative bg-black shadow-2xl shadow-purple-900/50">
                <canvas id="gameCanvas"></canvas>
                <div id="initial-start-screen" class="absolute inset-0 flex flex-col items-center justify-center bg-black/50 p-4">
                    <div class="text-center flex flex-col items-center gap-2 sm:gap-4">
                        <p class="text-xs sm:text-sm md:text-base mb-2">Hold to charge jump.<br>Aim, or click center to go up!</p>
                        <p class="text-xs uppercase tracking-widest">Choose Your Hero</p>
                        <div class="flex justify-center gap-2 sm:gap-4 mb-2">
                             <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="astronaut"><div title="Astronaut" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><g fill="#e5e7eb"><rect x="2.5" y="11" width="25" height="28"/><path d="M15 4c-6 0-11 6-11 12v1H15Z"/><path d="M15 4c6 0 11 6 11 12v1H15Z"/></g><circle cx="15" cy="17" r="9" fill="#111827"/><circle cx="19" cy="15" r="3" fill="rgba(255,255,255,0.3)"/><path d="M3 30 l-5 7 h10 Z" fill="#6b7280"/><path d="M27 30 l5 7 h-10 Z" fill="#6b7280"/></svg></div></div>
                             <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="alien"><div title="Alien" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><ellipse cx="15" cy="25" rx="14" ry="16" fill="#4ade80"/><circle cx="15" cy="18" r="10" fill="#f0fdf4"/><circle cx="15" cy="18" r="4" fill="#111827"/><path d="M15 8 L 15 2" stroke="#22c55e" stroke-width="2"/><circle cx="15" cy="2" r="3" fill="#f43f5e"/></svg></div></div>
                             <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="robot"><div title="Robot" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><rect x="2" y="2" width="26" height="12" fill="#d1d5db"/><rect x="2" y="14" width="26" height="28" fill="#9ca3af"/><circle cx="15" cy="8" r="4" fill="#ef4444"/><circle cx="15" cy="8" r="8" fill="rgba(255,100,100,0.5)"/></svg></div></div>
                        </div>
                        <button id="initial-startButton" class="btn text-base sm:text-xl py-2 px-4">START GAME</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="leaderboard-container" class="bg-black/30 rounded-2xl p-4 md:p-6 border border-purple-800/50 max-w-2xl mx-auto">
            <div class="section-title-container">
                 <h2 class="text-2xl md:text-3xl font-bold text-center flex items-center justify-center gap-x-3" style="font-family: 'Press Start 2P', cursive;">
                    <span class="live-dot"></span>
                    <span>LIVE GLOBAL LEADERBOARD</span>
                 </h2>
            </div>
             <div id="landing-leaderboard-list" class="space-y-2 mt-6">
                 <div class="text-center text-gray-400">Loading scores...</div>
             </div>
        </section>
        
        <section id="news-section" class="max-w-4xl mx-auto">
            <div class="section-title-container">
                <h2 class="text-2xl md:text-3xl font-bold text-center" style="font-family: 'Press Start 2P', cursive;">Gaming & Tech News</h2>
            </div>
            <div id="latest-news-list" class="space-y-4 mt-6">
                <p class="text-center text-gray-400">Loading latest news...</p>
            </div>
            <a href="news-page.html" class="block text-center mt-6 text-purple-400 hover:text-purple-300 font-bold" style="font-family: 'Press Start 2P', cursive;">More News...</a>
        </section>

        <section id="reviews-section" class="max-w-4xl mx-auto">
             <div class="section-title-container">
                <h2 class="text-2xl md:text-3xl font-bold text-center" style="font-family: 'Press Start 2P', cursive;">Product Reviews</h2>
            </div>
            <div id="latest-reviews-list" class="space-y-4 mt-6">
                 <p class="text-center text-gray-400">Loading latest reviews...</p>
            </div>
             <a href="reviews-page.html" class="block text-center mt-6 text-purple-400 hover:text-purple-300 font-bold" style="font-family: 'Press Start 2P', cursive;">More Reviews...</a>
        </section>
    </main>

    <footer class="bg-black/30 border-t border-purple-800/50 mt-16">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                <div class="col-span-2 md:col-span-1">
                    <a href="index.html">
                        <img src="https://i.imgur.com/aeDmJZR.png" alt="Astro Jumpers Logo" class="h-10">
                    </a>
                    <p class="mt-4 text-gray-400 text-sm">The galaxy's most addictive arcade game and your new home for gaming & tech news.</p>
                </div>
                <div>
                    <h3 class="text-sm font-semibold tracking-wider uppercase">Navigation</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#game-section-container" class="text-base text-gray-300 hover:text-white">Game</a></li>
                        <li><a href="#leaderboard-container" class="text-base text-gray-300 hover:text-white">Leaderboard</a></li>
                        <li><a href="news.html" class="text-base text-gray-300 hover:text-white">News</a></li>
                        <li><a href="reviews.html" class="text-base text-gray-300 hover:text-white">Reviews</a></li>
                    </ul>
                </div>
                <div>
                     <h3 class="text-sm font-semibold tracking-wider uppercase">Legal</h3>
                     <ul class="mt-4 space-y-4">
                         <li><a href="#" class="text-base text-gray-300 hover:text-white">About Us</a></li>
                         <li><a href="#" class="text-base text-gray-300 hover:text-white">Contact Us</a></li>
                         <li><a href="#" class="text-base text-gray-300 hover:text-white">Privacy Policy</a></li>
                         <li><a href="#" class="text-base text-gray-300 hover:text-white">Terms & Conditions</a></li>
                     </ul>
                </div>
            </div>
            <div class="mt-8 border-t border-purple-800/50 pt-8 text-center text-sm text-gray-400">
                <p>&copy; 2025 Astro Jumpers. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <div id="game-fullscreen-container" class="hidden fixed top-0 left-0 w-screen h-screen z-[100]">
        <div id="ad-banner-top" class="absolute top-0 left-0 w-full h-[60px] flex items-center justify-center">
            <div class="w-[320px] h-[50px] bg-black/30 border-2 border-dashed border-purple-700 flex items-center justify-center text-purple-400 text-sm" style="font-family: 'Press Start 2P', cursive;">
                <span>Ad Banner</span>
            </div>
        </div>
        <div id="game-runtime-container" class="relative w-full h-full">
            <div id="score" class="hud top-[80px] text-2xl md:text-4xl">SCORE: 0</div>
            <div id="highScore" class="hud top-[130px] md:top-[140px] text-lg md:text-xl opacity-70">BEST: 0</div>
            <div id="startScreen" class="modal flex flex-col items-center gap-2 sm:gap-4">
                <h1 class="text-2xl sm:text-4xl md:text-5xl font-bold mb-2 text-shadow">ASTRO JUMPERS</h1>
                <p class="text-xs sm:text-sm md:text-base mb-2">Hold to charge jump.<br>Aim, or click center to go up!</p>
                <p class="text-xs uppercase tracking-widest">Choose Your Hero</p>
                <div id="character-select" class="flex justify-center gap-2 sm:gap-4 mb-2">
                    <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="astronaut"><div title="Astronaut" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><g fill="#e5e7eb"><rect x="2.5" y="11" width="25" height="28"/><path d="M15 4c-6 0-11 6-11 12v1H15Z"/><path d="M15 4c6 0 11 6 11 12v1H15Z"/></g><circle cx="15" cy="17" r="9" fill="#111827"/><circle cx="19" cy="15" r="3" fill="rgba(255,255,255,0.3)"/><path d="M3 30 l-5 7 h10 Z" fill="#6b7280"/><path d="M27 30 l5 7 h-10 Z" fill="#6b7280"/></svg></div></div>
                    <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="alien"><div title="Alien" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><ellipse cx="15" cy="25" rx="14" ry="16" fill="#4ade80"/><circle cx="15" cy="18" r="10" fill="#f0fdf4"/><circle cx="15" cy="18" r="4" fill="#111827"/><path d="M15 8 L 15 2" stroke="#22c55e" stroke-width="2"/><circle cx="15" cy="2" r="3" fill="#f43f5e"/></svg></div></div>
                    <div class="character-option p-2 border-2 border-transparent rounded-lg cursor-pointer transition-all" data-character="robot"><div title="Robot" class="w-14 h-14 sm:w-16 sm:h-16 bg-gray-900 rounded-md flex items-center justify-center overflow-hidden"><svg viewBox="0 0 30 45" class="h-10 sm:h-12"><rect x="2" y="2" width="26" height="12" fill="#d1d5db"/><rect x="2" y="14" width="26" height="28" fill="#9ca3af"/><circle cx="15" cy="8" r="4" fill="#ef4444"/><circle cx="15" cy="8" r="8" fill="rgba(255,100,100,0.5)"/></svg></div></div>
                </div>
                <button id="startButton" class="btn text-base sm:text-xl py-2 px-4">START GAME</button>
            </div>
            <div id="gameOverScreen" class="modal hidden flex-col items-center gap-2 sm:gap-3">
                <h1 class="text-2xl sm:text-4xl md:text-5xl font-bold mb-1">GAME OVER</h1>
                <p class="text-base sm:text-lg md:text-xl mb-1">Your Score: <span id="finalScore">0</span></p>
                <div id="highScoreForm" class="hidden w-full flex-col items-center gap-2">
                    <p class="text-xs sm:text-sm">New high score! Enter your name:</p>
                    <input type="text" id="playerName" class="name-input text-sm w-full" maxlength="10" placeholder="AAA">
                    <button id="submitScoreButton" class="btn text-sm py-2 px-4 mt-1">Submit</button>
                </div>
                <div id="leaderboard" class="w-full mt-2">
                    <h2 class="text-base sm:text-lg md:text-xl mb-2">LEADERBOARD</h2>
                    <div id="leaderboard-list" class="text-xs sm:text-sm md:text-base"></div>
                </div>
                <button id="restartButton" class="btn mt-2 text-base sm:text-xl py-2 px-4">TRY AGAIN</button>
                <button id="exitGameButton" class="bg-gray-700 hover:bg-gray-600 text-white font-bold text-xs py-2 px-4 rounded-lg transition-colors duration-300 mt-4" style="font-family: 'Press Start 2P', cursive;">EXIT</button>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot, orderBy, limit, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- All Original Game Variables and Functions are defined first ---
        const hamburgerButton = document.getElementById('hamburger-button');
        // ... all other consts
        const exitGameButton = document.getElementById('exitGameButton');
        let isGameRunning = false; let score = 0; //... etc.
        let synth, landSynth, gameOverSynth; 
        
        // --- All Original Game Functions go here ---
        function setupSounds() { /* ... */ }
        function resizeCanvas() { /* ... */ }
        // ... etc. for all game functions

        // --- All Original Game Event Listeners go here ---
        hamburgerButton.addEventListener('click', () => { /* ... */ });
        initialStartButton.addEventListener('click', () => { /* ... */ });
        // ... etc. for all game event listeners

        setupCharacterSelection();
        // --- End of original synchronous code ---


        // --- New Secure Initialization and Dynamic Content Loading starts after the page is loaded ---
        document.addEventListener('DOMContentLoaded', () => {
            const mainContent = document.getElementById('main-content');
            let db, auth;
            let leaderboard = [];
            const leaderboardListEl = document.getElementById('leaderboard-list');

            async function initializeFirebase() {
                try {
                    const configResponse = await fetch('/.netlify/functions/get-config');
                    if (!configResponse.ok) throw new Error(`Failed to fetch config. Status: ${configResponse.status}.`);
                    const firebaseConfig = await configResponse.json();
                    if (!firebaseConfig.apiKey) throw new Error("Firebase API Key is missing.");
                    
                    const app = initializeApp(firebaseConfig);
                    db = getFirestore(app); 
                    auth = getAuth(app);
                    
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) await signInWithCustomToken(auth, __initial_auth_token);
                    else await signInAnonymously(auth);
                    
                    listenForScores(); 
                    fetchHomepageArticles();

                } catch (error) {
                    console.error("A critical error occurred during initialization:", error);
                    mainContent.innerHTML = `<div class="text-center p-8 bg-red-900/50 border-2 border-red-500 rounded-lg max-w-4xl mx-auto"><h1 class="text-2xl font-bold text-red-300">SITE OFFLINE</h1><p class="mt-4 text-lg text-red-200">A critical error occurred while loading the website.</p><pre class="mt-4 p-4 bg-black/50 text-left text-sm text-red-200 rounded-md overflow-x-auto">${error.message}</pre></div>`;
                }
            }

            function listenForScores() { 
                const scoresCollection = collection(db, `scores`);
                const q = query(scoresCollection, orderBy("score", "desc"), limit(10)); 
                onSnapshot(q, (snapshot) => { 
                    const scores = []; 
                    snapshot.forEach((doc) => { scores.push({ id: doc.id, ...doc.data() }); }); 
                    leaderboard = scores; 
                    renderLeaderboard(leaderboardListEl, 10, true); 
                    renderLeaderboard(document.getElementById('landing-leaderboard-list'), 5, false);
                }); 
            }
            
            function renderLeaderboard(targetElement, limit, isModal) {
                 // ... original renderLeaderboard function content ...
                 // This function needs the `leaderboard` variable which is defined in this scope.
            }

            async function submitScore() {
                const scoresCollection = collection(db, 'scores');
                // ... original submitScore function content ...
            }

            async function fetchHomepageArticles() {
                const articlesCollection = collection(db, 'articles');
                // ... original fetchHomepageArticles function content ...
            }

            async function populateArticleList(q, container, templateFunction) {
                // ... original populateArticleList function ...
            }

            function createNewsCardHTML(article) {
                // ... original createNewsCardHTML function ...
            }

            function createReviewCardHTML(article) {
                // ... original createReviewCardHTML function ...
            }

            initializeFirebase();
        });
    </script>
</body>
</html>






